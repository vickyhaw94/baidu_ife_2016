<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>IFE JavaScript Task 01</title>
</head>
<body>
	<ul id="source">
		<li>北京空气质量：<b>90</b></li>
		<li>上海空气质量：<b>70</b></li>
		<li>天津空气质量：<b>80</b></li>
		<li>广州空气质量：<b>50</b></li>
		<li>深圳空气质量：<b>40</b></li>
		<li>福州空气质量：<b>32</b></li>
		<li>成都空气质量：<b>90</b></li>
    </ul>
	
	<ul id="resort">
		 <!-- 
			<li>第一名：北京空气质量：<b>90</b></li>
			<li>第二名：北京空气质量：<b>90</b></li>
			<li>第三名：北京空气质量：<b>90</b></li>
		 -->	
	</ul>
	
	<button id="sort-btn">排序</button>
	
<script type="text/javascript">
	/** This is used to get data from the source */
	function getData(){
		var getSource = document.getElementById("source").children;
		var dataSet = [];
		for(i = 0; i<getSource.length; i++){
			var getCity = getSource[i].innerText.substring(0,2);
			var getPolutionNum = parseInt(getSource[i].children[0].innerText);
			dataSet.push([getCity,getPolutionNum]);
		}
		return dataSet;
	}
	/** This is used to sort the data from dataSet*/
	function sortAqiData(dataSet){
		dataSet.sort(function(a,b){
			return b[1]-a[1]
		});
		return dataSet;
	}
	/** This is used to put data on the id ="resort"*/
	function render(dataSet){
		for(i=0; i<dataSet.length;i++){
			var getResort = document.getElementById("resort");
			getResort.innerHTML = getResort.innerHTML + 
									"<li>" +"第"+parseInt(i+1) +"名"+":" +
										dataSet[i][0] +"空气质量：" + "<b>" +
				 						dataSet[i][1] + "<b>" +
									"</li>";
		}
	}
	/** This is provided by baidu*/
	function btnHandle(){
		var aqiData = getData();
		aqiData = sortAqiData(aqiData);
		render(aqiData);
	}
	/** This is used to trigger the button function*/
	function init(){
		var getButton = document.getElementById("sort-btn");
		getButton.onclick = btnHandle;
	}
	
	init();
</script>
</body>
</html>